(function(n,t,i){ko.applyBindings(new QuoteApplicationViewModel(i,t))})(window.jQuery,window.Globalize,namespace("argon")),function(n,t,i,r){function tt(n){var t=n.flat.val();n.flat.val(t.replace("apartment","apt").replace("Apartment","Apt"))}function it(){r.capturePlus.controls[1].listen("populate",function(){tt(t.controls.currentResidency);var n=[t.controls.currentResidency.flat.val(),t.controls.currentResidency.houseName.val(),(t.controls.currentResidency.houseNumber.val()?t.controls.currentResidency.houseNumber.val()+" ":"")+t.controls.currentResidency.street.val(),t.controls.currentResidency.street2.val(),t.controls.currentResidency.district.val(),t.controls.currentResidency.townOrCity.val(),t.controls.currentResidency.county.val(),t.controls.currentResidency.postcode.val()].filter(function(n){return n});t.controls.currentResidency.formattedAddress.val(n.join(", "));d.html(n.join(", "));rt();ft()});r.capturePlus.controls[1].listen("noresults",function(){y=setTimeout(function(){window.pca.capturePlus.controls[1].autocomplete.hide();c.removeClass("hide");s(o,f)},2e3)});r.capturePlus.controls[1].listen("manual",function(){s(o,f)});r.capturePlus.controls[1].listen("display",function(){r.capturePlus.controls[1].autocomplete.header.clear().setContent(r.create("div",{className:"pcamessage",innerHTML:"Can't find your address?  <span style='text-decoration:underline;'>Enter address manually.<\/span>",onclick:r.capturePlus.controls[1].manualEntry},"cursor:pointer;")).show()})}function w(){t.controls.currentResidency.flat.val("");t.controls.currentResidency.houseName.val("");t.controls.currentResidency.houseNumber.val("");t.controls.currentResidency.street.val("");t.controls.currentResidency.street2.val("");t.controls.currentResidency.district.val("");t.controls.currentResidency.townOrCity.val("");t.controls.currentResidency.county.val("");t.controls.currentResidency.postcode.val("")}function s(){i.setAddressEditModeValidation(!0);o.addClass("hide");f.removeClass("hide")}function rt(){h.addClass("hide");v.removeClass("hide")}function a(){l.addClass("hide")}function ut(){i.setAddressEditModeValidation(!1);o.removeClass("hide");f.addClass("hide")}function b(){h.removeClass("hide");v.addClass("hide")}function ft(){l.removeClass("hide")}var e=n("body"),u=n(".current-residency .address:first"),o=u.find(".address-lookup"),h=u.find(".address-lookup-search"),v=u.find(".address-lookup-search-result"),c=u.find(".address-not-found"),f=u.find(".address-fields"),k=f.find(".address-lookup-retry"),l=u.find(".address-your"),d=l.find(".address-your-selected-address"),g=h.find("input:first-of-type"),y,nt=setTimeout(function(){clearInterval(p);s(o,f);k.addClass("hide");g.addClass("data-val-ignore")},1e3),p=setInterval(function(){typeof r!="undefined"&&(clearTimeout(nt),clearInterval(p),it())},100);e.on("click",".current-residency .address-lookup-retry",function(n){c.hasClass("hide")||(t.controls.currentResidency.addressSearch.val(""),c.addClass("hide"));w();b();ut();a();r.capturePlus.controls[1].reload();t.smoothScrollTo(t.controls.currentResidency.addressSearch,function(){n.preventDefault();t.controls.currentResidency.addressSearch.focus()})});e.on("click",".current-residency .address-lookup-search-edit",function(){s();a()});e.on("click",".current-residency .address-lookup-search-retry",function(n){w();b();a();t.smoothScrollTo(t.controls.currentResidency.addressSearch,function(){n.preventDefault();t.controls.currentResidency.addressSearch.focus()})});e.on("focus",t.selectors.currentResidency.addressSearch,function(){r.capturePlus.controls[1].search(t.controls.currentResidency.addressSearch.val())});e.on("keyup",t.selectors.currentResidency.addressSearch,function(){clearTimeout(y)})}(window.jQuery,namespace("argon"),namespace("argon.validation"),window.pca),function(n,t,i,r){function it(n){var t=n.flat.val();n.flat.val(t.replace("apartment","apt").replace("Apartment","Apt"))}function rt(){r.capturePlus.controls[0].listen("populate",function(){it(t.controls.currentResidency);var n=[t.controls.previousResidency.flat.val(),t.controls.previousResidency.houseName.val(),(t.controls.previousResidency.houseNumber.val()?t.controls.previousResidency.houseNumber.val()+" ":"")+t.controls.previousResidency.street.val(),t.controls.previousResidency.street2.val(),t.controls.previousResidency.district.val(),t.controls.previousResidency.townOrCity.val(),t.controls.previousResidency.county.val(),t.controls.previousResidency.postcode.val()].filter(function(n){return n});t.controls.previousResidency.formattedAddress.val(n.join(", "));g.html(n.join(", "));ut();et();a.hide()});r.capturePlus.controls[0].listen("noresults",function(){p=setTimeout(function(){window.pca.capturePlus.controls[0].autocomplete.hide();c.removeClass("hide");s(o,f)},2e3)});r.capturePlus.controls[0].listen("manual",function(){s(o,f)});r.capturePlus.controls[0].listen("display",function(){r.capturePlus.controls[0].autocomplete.header.clear().setContent(r.create("div",{className:"pcamessage",innerHTML:"Can't find your address? <span style='text-decoration:underline;'>Enter address manually.<\/span>",onclick:r.capturePlus.controls[0].manualEntry},"cursor:pointer;")).show()})}function b(){t.controls.previousResidency.flat.val("");t.controls.previousResidency.houseName.val("");t.controls.previousResidency.houseNumber.val("");t.controls.previousResidency.street.val("");t.controls.previousResidency.street2.val("");t.controls.previousResidency.district.val("");t.controls.previousResidency.townOrCity.val("");t.controls.previousResidency.county.val("");t.controls.previousResidency.postcode.val("")}function s(){i.setAddressEditModeValidation(!0);o.addClass("hide");f.removeClass("hide")}function ut(){h.addClass("hide");y.removeClass("hide")}function v(){l.addClass("hide");a.show()}function ft(){i.setAddressEditModeValidation(!1);o.removeClass("hide");f.addClass("hide")}function k(){h.removeClass("hide");y.addClass("hide")}function et(){l.removeClass("hide");a.hide()}var e=n("body"),u=n(".previous-residency .address:first"),o=u.find(".address-lookup"),h=u.find(".address-lookup-search"),y=u.find(".address-lookup-search-result"),c=u.find(".address-not-found"),f=u.find(".address-fields"),d=f.find(".address-lookup-retry"),l=u.find(".address-your"),g=l.find(".address-your-selected-address"),nt=h.find("input:first-of-type"),a=n(".previous-residency .previous-residency-warn:first"),p,tt=setTimeout(function(){clearInterval(w);s(o,f);d.addClass("hide");nt.addClass("data-val-ignore")},1e3),w=setInterval(function(){typeof r!="undefined"&&(clearTimeout(tt),clearInterval(w),rt())},100);e.on("click",".previous-residency .address-lookup-retry",function(n){c.hasClass("hide")||(t.controls.previousResidency.addressSearch.val(""),c.addClass("hide"));b();k();ft();v();r.capturePlus.controls[0].reload();t.smoothScrollTo(t.controls.previousResidency.addressSearch,function(){n.preventDefault();t.controls.previousResidency.addressSearch.focus()})});e.on("click",".previous-residency .address-lookup-search-edit",function(){s();v()});e.on("click",".previous-residency .address-lookup-search-retry",function(n){b();k();v();t.smoothScrollTo(t.controls.previousResidency.addressSearch,function(){n.preventDefault();t.controls.previousResidency.addressSearch.focus()})});e.on("focus",t.selectors.previousResidency.addressSearch,function(){r.capturePlus.controls[0].search(t.controls.previousResidency.addressSearch.val())});e.on("keyup",t.selectors.previousResidency.addressSearch,function(){clearTimeout(p)})}(window.jQuery,namespace("argon"),namespace("argon.validation"),window.pca),function(n){function i(t){var i=n(".previous-residency"),r=i.find(".time-at-years"),u=i.find(".time-at-months"),f=i.find("#PreviousResidency_Address_Postcode"),e=i.find(".address-lookup-search input:first-of-type");t<1?(r.removeClass("data-val-ignore"),u.removeClass("data-val-ignore"),f.removeClass("data-val-ignore"),e.removeClass("data-val-ignore"),i.show("slow")):(r.addClass("data-val-ignore"),u.addClass("data-val-ignore"),f.addClass("data-val-ignore"),e.addClass("data-val-ignore"),i.hide("slow"))}var t=n(".current-residency .time-at-years");t.change(function(){i(n(this).val())});t.val()!=""&&i(t.val())}(window.jQuery,namespace("argon")),function(n){function t(t){t===!0?(n(".print-view").show(),n(".application > div, footer").not(".print-view").hide(),n(".application").addClass("application-print-view")):(n(".print-view").hide(),n(".application > div, footer").not(".print-view, .modal").show(),n(".application").removeClass("application-print-view"))}n(".print-loan-terms-and-conditions").click(function(){$termsAndConditions=n(".terms-and-conditions").clone();n(".print-view-content").append($termsAndConditions);t(!0)});n(".print-pre-contract").click(function(){$preContractCreditInformation=n(".pre-contract-credit-information").clone();n(".print-view-content").append($preContractCreditInformation);t(!0)});n(".print-view-return").click(function(){n(".print-view-content").empty();t(!1)});n(".print-view-print").click(function(){window.print()})}(window.jQuery),function(n){n("#EmailAddress, #EmailAddressConfirmation").bind("copy paste",function(n){n.preventDefault()})}(window.jQuery),function(n){n("input[data-numeric-only=true]").on("keypress",function(n){var t=n.which?n.which:n.keyCode;t>31&&(t<48||t>57)&&n.preventDefault()})}(window.jQuery),function(n){n("input[data-numeric-only=true]").bind("change",function(){var t=n(this).val().replace(/[^\d]/g,"");n(this).val(t)})}(window.jQuery),function(n,t){var i=namespace("argon.validation.dateOfBirth");i.intialDayInputMade=!1;i.intialMonthInputMade=!1;i.intialYearInputMade=!1;n("select[name^=DateOfBirth]").change(function(){n(this).attr("id")=="DateOfBirth_Day"&&(t.dateOfBirth.initialDayInputMade=!0);n(this).attr("id")=="DateOfBirth_Month"&&(t.dateOfBirth.initialMonthInputMade=!0);n(this).attr("id")=="DateOfBirth_Year"&&(t.dateOfBirth.initialYearInputMade=!0);t.dateOfBirth.initialDayInputMade&&t.dateOfBirth.initialMonthInputMade&&t.dateOfBirth.initialYearInputMade&&t.validateDateOfBirthTemp()})}(window.jQuery,namespace("argon.validation")),function(n,t,i){n("body").on("click",'button[type="submit"]',function(i){if(t.validateCurrentStep(),n(i.target).parents("form:first").valid()){var r=n("#submit-modal");r.modal({backdrop:"static",keyboard:!1});r.modal("show")}else i.preventDefault()});n("[data-auto-tab]").each(function(){var t=n(this),r=n("#"+t.attr("data-auto-tab")),u=t.attr("maxlength");r!=i&&u!=i&&t.keyup(function(n){var i=n.keyCode?n.keyCode:n.charCode,e=t.val().length,f=parseInt(u);e>=f&&(i>=48&&i<=57||i>=96&&i<=105)&&(e>f&&t.val(t.val().substring(0,f)),r.focus(),r.trigger("click"))})})}(window.jQuery,namespace("argon.validation")),function(n){n(".panel-collapse").on("hidden.bs.collapse",function(t){var r=n(t.target).parents(".box-yl").offset(),i=r.top-5,u=n(window).scrollTop();i<u&&n("body").animate({scrollTop:i},"50")})}(window.jQuery),function(n){if(n){var t="HelloSoda.DateOfBirth",i=$('[name="'+t+'"]'),r=$('[name="DateOfBirth.Day"]'),u=$('[name="DateOfBirth.Month"]'),f=$('[name="DateOfBirth.Year"]');n.init({productId:"568aa84ac7b933082e3f8096",buttons:!0,connect:"socialconnect/popup",form:"#apply-form",events:{onSocialProfileAvailable:function(){var t,n;if(i.length){if(t=i.val(),n=t.split("/"),n.length<3)return;var e=parseInt(n[0],10),o=parseInt(n[1],10),s=parseInt(n[2],10);r.val()||r.val(e);u.val()||u.val(o);f.val()||f.val(s)}}}},[{formfield:"FirstName",api:"data.first_name"},{formfield:"LastName",api:"data.last_name"},{formfield:"EmailAddress",api:"data.contact.email"},{formfield:"EmailAddressConfirmation",api:"data.contact.email"},{formfield:t,api:"data.birthdate",translate:HelloSoda.date("dd/MM/yyyy")}])}}(window.HelloSoda)